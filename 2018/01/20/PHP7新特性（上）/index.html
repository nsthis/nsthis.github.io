<!DOCTYPE html><html lang="zh-CN"><head><meta http-equiv="content-type" content="text/html; charset=utf-8"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black-translucent" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="description"><meta name="keywords" content="hello  广华, 广华, yuehuaxw, "><title>PHP7新特性(上) | Hello  广华</title><link rel="stylesheet" type="text/css" href="/css/style.css?v=0.0.0"><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/normalize/8.0.0/normalize.min.css"><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/pure/1.0.0/pure-min.css"><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/pure/1.0.0/grids-responsive-min.css"><link rel="stylesheet" href="//cdn.bootcss.com/font-awesome/4.7.0/css/font-awesome.min.css"><script type="text/javascript" src="//cdn.bootcss.com/jquery/3.3.1/jquery.min.js"></script><link rel="Shortcut Icon" type="image/x-icon" href="/favicon.ico"><link rel="apple-touch-icon" href="/apple-touch-icon.png"><link rel="apple-touch-icon-precomposed" href="/apple-touch-icon.png"><script>var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = 'https://hm.baidu.com/hm.js?' + '9b7534d772981730a36e6d23548ffe6a';
  var s = document.getElementsByTagName("script")[0];
  s.parentNode.insertBefore(hm, s);
  })();
  </script></head><body><div class="body_container"><div id="header"><div class="site-name"><h1 class="hidden">PHP7新特性(上)</h1><a id="logo" href="/.">Hello  广华</a><p class="description">今天你是否还有事情未完成？</p></div><div id="nav-menu"><a class="current" href="/."><i class="fa fa-home"> 首页</i></a><a href="/archives/"><i class="fa fa-archive"> 归档</i></a></div></div><div class="pure-g" id="layout"><div class="pure-u-1 pure-u-md-3-4"><div class="content_container"><div class="post"><h1 class="post-title">PHP7新特性(上)</h1><div class="post-meta">Jan 20, 2018<span> | </span><span class="category"><a href="/categories/PHP/">PHP</a></span><script src="https://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js" async></script><span id="busuanzi_container_page_pv"> | <span id="busuanzi_value_page_pv"></span><span> 阅读</span></span><span class="post-time"><span class="post-meta-item-text"> | </span><span class="post-meta-item-icon"><i class="fa fa-keyboard-o"></i><!-- span.post-meta-item-text= " 字数统计："--><span class="post-count"> 2,851</span><span class="post-meta-item-text"> 字</span></span></span><span class="post-time">  |  <span class="post-meta-item-icon"><i class="fa fa-hourglass-half"></i><!-- span.post-meta-item-text= " 阅读时长："--><span class="post-count"> 13</span><span class="post-meta-item-text"> 分钟</span></span></span></div><div class="post-content"><p>PHP7出来也很久了，都说PHP7的性能有了很大的提高，现在介绍下PHP7的新特性</p>
<a id="more"></a>
<h2 id="Group-use-declarations"><a href="#Group-use-declarations" class="headerlink" title="Group use declarations"></a>Group use declarations</h2><p>从同一 namespace 导入的类、函数和常量现在可以通过单个 use 语句 一次性导入了</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">//PHP7之前</span><br><span class="line"><span class="keyword">use</span> <span class="keyword">some</span>\namespace\ClassA;</span><br><span class="line"><span class="keyword">use</span> <span class="keyword">some</span>\namespace\ClassB;</span><br><span class="line"><span class="keyword">use</span> <span class="keyword">some</span>\namespace\ClassC <span class="keyword">as</span> C;</span><br><span class="line"><span class="keyword">use</span> <span class="keyword">function</span> <span class="keyword">some</span>\namespace\fn_a;</span><br><span class="line"><span class="keyword">use</span> <span class="keyword">function</span> <span class="keyword">some</span>\namespace\fn_b;</span><br><span class="line"><span class="keyword">use</span> <span class="keyword">function</span> <span class="keyword">some</span>\namespace\fn_c;</span><br><span class="line"><span class="keyword">use</span> const <span class="keyword">some</span>\namespace\ConstA;</span><br><span class="line"><span class="keyword">use</span> const <span class="keyword">some</span>\namespace\ConstB;</span><br><span class="line"><span class="keyword">use</span> const <span class="keyword">some</span>\namespace\ConstC;</span><br><span class="line"> </span><br><span class="line">// PHP7之后</span><br><span class="line"><span class="keyword">use</span> <span class="keyword">some</span>\namespace\&#123;ClassA, ClassB, ClassC <span class="keyword">as</span> C&#125;;</span><br><span class="line"><span class="keyword">use</span> <span class="keyword">function</span> <span class="keyword">some</span>\namespace\&#123;fn_a, fn_b, fn_c&#125;;</span><br><span class="line"><span class="keyword">use</span> const <span class="keyword">some</span>\namespace\&#123;ConstA, ConstB, ConstC&#125;;</span><br></pre></td></tr></table></figure>
<h2 id="支持延迟静态绑定"><a href="#支持延迟静态绑定" class="headerlink" title="支持延迟静态绑定"></a>支持延迟静态绑定</h2><p>static关键字来引用当前类，即实现了延迟静态绑定</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">A</span> </span>&#123;    </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="function"><span class="keyword">function</span> <span class="title">who</span><span class="params">()</span> </span>&#123;    </span><br><span class="line">        <span class="keyword">echo</span> <span class="keyword">__CLASS__</span>;    </span><br><span class="line">    &#125;    </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="function"><span class="keyword">function</span> <span class="title">test</span><span class="params">()</span> </span>&#123;    </span><br><span class="line">        <span class="keyword">static</span>::who(); <span class="comment">// 这里实现了延迟的静态绑定    </span></span><br><span class="line">    &#125;    </span><br><span class="line">&#125;    </span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">B</span> <span class="keyword">extends</span> <span class="title">A</span> </span>&#123;    </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="function"><span class="keyword">function</span> <span class="title">who</span><span class="params">()</span> </span>&#123;    </span><br><span class="line">         <span class="keyword">echo</span> <span class="keyword">__CLASS__</span>;    </span><br><span class="line">    &#125;    </span><br><span class="line">&#125;</span><br><span class="line">B::test();</span><br></pre></td></tr></table></figure>
<p>输出结果:B</p>
<h2 id="支持goto语句"><a href="#支持goto语句" class="headerlink" title="支持goto语句"></a>支持goto语句</h2><p>多数计算机程序设计语言中都支持无条件转向语句goto，当程序执行到goto语句时，即转向由goto语句中的标号指出的程序位置继续执行。尽管goto语句有可能会导致程序流程不清晰，可读性减弱，但在某些情况下具有其独特的方便之处，例如中断深度嵌套的循环和 if 语句。</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">goto</span> a;    </span><br><span class="line"><span class="keyword">echo</span> <span class="string">'Foo'</span>;    </span><br><span class="line">a:    </span><br><span class="line"><span class="keyword">echo</span> <span class="string">'Bar'</span>;    </span><br><span class="line"><span class="keyword">for</span>($i=<span class="number">0</span>,$j=<span class="number">50</span>; $i&lt;<span class="number">100</span>; $i++) &#123;    </span><br><span class="line">  <span class="keyword">while</span>($j--) &#123;    </span><br><span class="line">    <span class="keyword">if</span>($j==<span class="number">17</span>) <span class="keyword">goto</span> end;    </span><br><span class="line">  &#125;     </span><br><span class="line">&#125;    </span><br><span class="line"><span class="keyword">echo</span> <span class="string">"i = $i"</span>;    </span><br><span class="line">end:    </span><br><span class="line"><span class="keyword">echo</span> <span class="string">'j hit 17'</span>;</span><br></pre></td></tr></table></figure>
<h2 id="支持闭包、Lambda-Anonymous函数"><a href="#支持闭包、Lambda-Anonymous函数" class="headerlink" title="支持闭包、Lambda/Anonymous函数"></a>支持闭包、Lambda/Anonymous函数</h2><p>1、闭包（Closure）函数和Lambda函数的概念来自于函数编程领域。例如JavaScript 是支持闭包和 lambda 函数的最常见语言之一</p>
<p>2、在PHP中，我们也可以通过create_function()在代码运行时创建函数。但有一个问题：创建的函数仅在运行时才被编译，而不与其它代码同时被编译成执行码，因此我们无法使用类似APC这样的执行码缓存来提高代码执行效率</p>
<p>3、在PHP5.3中，我们可以使用Lambda/匿名函数来定义一些临时使用（即用即弃型）的函数，以作为array_map()/array_walk()等函数的回调函数</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">echo</span> preg_replace_callback(<span class="string">'~-([a-z])~'</span>, <span class="function"><span class="keyword">function</span> <span class="params">($match)</span> </span>&#123;    </span><br><span class="line">    <span class="keyword">return</span> strtoupper($match[<span class="number">1</span>]);    </span><br><span class="line">&#125;, <span class="string">'hello-world'</span>);    </span><br><span class="line"><span class="comment">// 输出 helloWorld    </span></span><br><span class="line">$greet = <span class="function"><span class="keyword">function</span><span class="params">($name)</span>    </span></span><br><span class="line"><span class="function"></span>&#123;    </span><br><span class="line">    printf(<span class="string">"Hello %s\r\n"</span>, $name);    </span><br><span class="line">&#125;;    </span><br><span class="line">$greet(<span class="string">'World'</span>);    </span><br><span class="line">$greet(<span class="string">'PHP'</span>);    </span><br><span class="line"><span class="comment">//...在某个类中    </span></span><br><span class="line">$callback =      <span class="function"><span class="keyword">function</span> <span class="params">($quantity, $product)</span> <span class="title">use</span> <span class="params">($tax, &amp;$total)</span>         </span>&#123;    </span><br><span class="line">   $pricePerItem = constant(<span class="keyword">__CLASS__</span> . <span class="string">"::PRICE_"</span> .  strtoupper($product));    </span><br><span class="line">   $total += ($pricePerItem * $quantity) * ($tax + <span class="number">1.0</span>);    </span><br><span class="line"> &#125;;</span><br></pre></td></tr></table></figure>
<h2 id="魔术方法callStatic-和invoke"><a href="#魔术方法callStatic-和invoke" class="headerlink" title="魔术方法callStatic()和invoke()"></a>魔术方法<strong>callStatic()和</strong>invoke()</h2><p>PHP中原本有一个魔术方法<strong>call()，当代码调用对象的某个不存在的方法时该魔术方法会被自动调用。新增的</strong>callStatic()方法则只用于静态类方法。当尝试调用类中不存在的静态方法时，__callStatic()魔术方法将被自动调用。</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MethodTest</span> </span>&#123;    </span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">__call</span><span class="params">($name, $arguments)</span> </span>&#123;    </span><br><span class="line">        <span class="comment">// 参数 $name 大小写敏感    </span></span><br><span class="line">        <span class="keyword">echo</span> <span class="string">"调用对象方法 '$name' "</span>    </span><br><span class="line">             . implode(<span class="string">' -- '</span>, $arguments). <span class="string">"\n"</span>;    </span><br><span class="line">    &#125;    </span><br><span class="line">    <span class="comment">/**  PHP 5.3.0 以上版本中本类方法有效  */</span>    </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="function"><span class="keyword">function</span> <span class="title">__callStatic</span><span class="params">($name, $arguments)</span> </span>&#123;    </span><br><span class="line">        <span class="comment">// 参数 $name 大小写敏感    </span></span><br><span class="line">        <span class="keyword">echo</span> <span class="string">"调用静态方法 '$name' "</span>    </span><br><span class="line">             . implode(<span class="string">' -- '</span>, $arguments). <span class="string">"\n"</span>;    </span><br><span class="line">    &#125;    </span><br><span class="line">&#125;    </span><br><span class="line"> </span><br><span class="line">$obj = <span class="keyword">new</span> MethodTest;    </span><br><span class="line">$obj-&gt;runTest(<span class="string">'通过对象调用'</span>);    </span><br><span class="line">MethodTest::runTest(<span class="string">'静态调用'</span>);  <span class="comment">// As of PHP 5.3.0</span></span><br></pre></td></tr></table></figure>
<p>以上代码执行后输出如下： </p>
<p>调用对象方法’runTest’ –- 通过对象调用调用静态方法’runTest’ –- 静态调用 </p>
<p>以函数形式来调用对象时，__invoke()方法将被自动调用。</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MethodTest</span> </span>&#123;    </span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">__call</span><span class="params">($name, $arguments)</span> </span>&#123;    </span><br><span class="line">        <span class="comment">// 参数 $name 大小写敏感    </span></span><br><span class="line">        <span class="keyword">echo</span> <span class="string">"Calling object method '$name' "</span>    </span><br><span class="line">             . implode(<span class="string">', '</span>, $arguments). <span class="string">"\n"</span>;    </span><br><span class="line">    &#125;    </span><br><span class="line"> </span><br><span class="line">    <span class="comment">/**  PHP 5.3.0 以上版本中本类方法有效  */</span>    </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="function"><span class="keyword">function</span> <span class="title">__callStatic</span><span class="params">($name, $arguments)</span> </span>&#123;    </span><br><span class="line">        <span class="comment">// 参数 $name 大小写敏感    </span></span><br><span class="line">        <span class="keyword">echo</span> <span class="string">"Calling static method '$name' "</span>    </span><br><span class="line">             . implode(<span class="string">', '</span>, $arguments). <span class="string">"\n"</span>;    </span><br><span class="line">    &#125;    </span><br><span class="line">&#125;    </span><br><span class="line">$obj = <span class="keyword">new</span> MethodTest;    </span><br><span class="line">$obj-&gt;runTest(<span class="string">'in object context'</span>);    </span><br><span class="line">MethodTest::runTest(<span class="string">'in static context'</span>);  <span class="comment">// As of PHP 5.3.0</span></span><br></pre></td></tr></table></figure>
<h2 id="Nowdoc语法"><a href="#Nowdoc语法" class="headerlink" title="Nowdoc语法"></a>Nowdoc语法</h2><p>用法和Heredoc类似，但使用单引号。Heredoc则需要通过使用双引号来声明。 </p>
<p>Nowdoc中不会做任何变量解析，非常适合于传递一段PHP代码。</p>
<figure class="highlight sqf"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Nowdoc 单引号 PHP 5.3之后支持    </span></span><br><span class="line">$<span class="built_in">name</span> = <span class="string">'MyName'</span>;    </span><br><span class="line"><span class="built_in">echo</span> &lt;&lt;&lt;<span class="string">'EOT'</span>    </span><br><span class="line">My <span class="built_in">name</span> is <span class="string">"$name"</span>.    </span><br><span class="line">EOT;    </span><br><span class="line"><span class="comment">//上面代码输出 My name is "$name". ((其中变量不被解析)    </span></span><br><span class="line"><span class="comment">// Heredoc不加引号    </span></span><br><span class="line"><span class="built_in">echo</span> &lt;&lt;&lt;FOOBAR    </span><br><span class="line">Hello World!    </span><br><span class="line">FOOBAR;    </span><br><span class="line"><span class="comment">//或者 双引号 PHP 5.3之后支持    </span></span><br><span class="line"><span class="built_in">echo</span> &lt;&lt;&lt;<span class="string">"FOOBAR"</span>    </span><br><span class="line">Hello World!    </span><br><span class="line">FOOBAR;</span><br></pre></td></tr></table></figure>
<p>支持通过Heredoc来初始化静态变量、类成员和类常量。</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 静态变量    </span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">foo</span><span class="params">()</span>    </span></span><br><span class="line"><span class="function"></span>&#123;    </span><br><span class="line">    <span class="keyword">static</span> $bar = &lt;&lt;&lt;LABEL    </span><br><span class="line">Nothing in here...    </span><br><span class="line">LABEL;    </span><br><span class="line">&#125;    </span><br><span class="line"><span class="comment">// 类成员、常量    </span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">foo</span>    </span></span><br><span class="line"><span class="class"></span>&#123;    </span><br><span class="line">    <span class="keyword">const</span> BAR = &lt;&lt;&lt;FOOBAR    </span><br><span class="line">Constant example    </span><br><span class="line">FOOBAR;    </span><br><span class="line"> </span><br><span class="line">    <span class="keyword">public</span> $baz = &lt;&lt;&lt;FOOBAR    </span><br><span class="line">Property example    </span><br><span class="line">FOOBAR;    </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="在类外也可使用const来定义常量"><a href="#在类外也可使用const来定义常量" class="headerlink" title="在类外也可使用const来定义常量"></a>在类外也可使用const来定义常量</h2><figure class="highlight lasso"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//PHP中定义常量通常是用这种方式  </span></span><br><span class="line"><span class="class"><span class="keyword">define</span></span>(<span class="string">"CONSTANT"</span>, <span class="string">"Hello world."</span>);  </span><br><span class="line"> </span><br><span class="line"><span class="comment">//并且新增了一种常量定义方式  </span></span><br><span class="line">const CONSTANT = <span class="string">'Hello World'</span>;</span><br></pre></td></tr></table></figure>
<h2 id="三元运算符增加了一个快捷书写方式"><a href="#三元运算符增加了一个快捷书写方式" class="headerlink" title="三元运算符增加了一个快捷书写方式"></a>三元运算符增加了一个快捷书写方式</h2><p>原本格式为是(expr1) ? (expr2) : (expr3)<br>如果expr1结果为True，则返回expr2的结果。<br>新增一种书写方式，可以省略中间部分，书写为expr1 ?: expr3<br>如果expr1结果为True,则返回expr1的结果</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash">expr1=1;</span></span><br><span class="line"><span class="meta">$</span><span class="bash">expr2=2;</span></span><br><span class="line">//原格式  </span><br><span class="line"><span class="meta">$</span><span class="bash">expr=<span class="variable">$expr1</span>?<span class="variable">$expr1</span>:<span class="variable">$expr2</span>  </span></span><br><span class="line">//新格式  </span><br><span class="line"><span class="meta">$</span><span class="bash">expr=<span class="variable">$expr1</span>?:<span class="variable">$expr2</span></span></span><br></pre></td></tr></table></figure>
<p>输出结果： </p>
<p>1 </p>
<p>1</p>
<h2 id="空合并运算符（-）"><a href="#空合并运算符（-）" class="headerlink" title="空合并运算符（??）"></a>空合并运算符（??）</h2><p>简化判断</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash">param = <span class="variable">$_GET</span>[<span class="string">'param'</span>] ?? 1;</span></span><br></pre></td></tr></table></figure>
<p>相当于：</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$param = <span class="keyword">isset</span>($_GET[<span class="string">'param'</span>]) ? $_GET[<span class="string">'param'</span>] : <span class="number">1</span>;</span><br></pre></td></tr></table></figure>
<h2 id="Json更懂中文-JSON-UNESCAPED-UNICODE"><a href="#Json更懂中文-JSON-UNESCAPED-UNICODE" class="headerlink" title="Json更懂中文(JSON_UNESCAPED_UNICODE)"></a>Json更懂中文(JSON_UNESCAPED_UNICODE)</h2><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="function">echo <span class="title">json_encode</span><span class="params">(<span class="string">"中文"</span>, JSON_UNESCAPED_UNICODE)</span></span>;  </span><br><span class="line"><span class="comment">//输出："中文"</span></span><br></pre></td></tr></table></figure>
<h2 id="二进制"><a href="#二进制" class="headerlink" title="二进制"></a>二进制</h2><figure class="highlight maxima"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$bin  = <span class="number">0b1101</span>;  </span><br><span class="line">echo $bin;  </span><br><span class="line">//<span class="number">13</span></span><br></pre></td></tr></table></figure>
<h2 id="Unicode-codepoint-转译语法"><a href="#Unicode-codepoint-转译语法" class="headerlink" title="Unicode codepoint 转译语法"></a>Unicode codepoint 转译语法</h2><p>这接受一个以16进制形式的 Unicode codepoint，并打印出一个双引号或heredoc包围的 UTF-8 编码格式的字符串。 可以接受任何有效的 codepoint，并且开头的 0 是可以省略的。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">echo</span> <span class="string">"\u&#123;9876&#125;"</span></span><br></pre></td></tr></table></figure>
<h2 id="使用-进行幂运算"><a href="#使用-进行幂运算" class="headerlink" title="使用 ** 进行幂运算"></a>使用 ** 进行幂运算</h2><p>加入右连接运算符 <em> 来进行幂运算。 同时还支持简写的 </em>= 运算符，表示进行幂运算并赋值。</p>
<figure class="highlight lsl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">printf(<span class="string">"2 ** 3 ==      %d<span class="subst">\n</span>"</span>, <span class="number">2</span> ** <span class="number">3</span>);</span><br><span class="line">printf(<span class="string">"2 ** 3 ** 2 == %d<span class="subst">\n</span>"</span>, <span class="number">2</span> ** <span class="number">3</span> ** <span class="number">2</span>);</span><br><span class="line"> </span><br><span class="line">$a = <span class="number">2</span>;</span><br><span class="line">$a **= <span class="number">3</span>;</span><br><span class="line">printf(<span class="string">"a ==           %d<span class="subst">\n</span>"</span>, $a);</span><br></pre></td></tr></table></figure>
<p>输出 </p>
<p>2 ** 3 == 8 </p>
<p>2 <em> 3 </em> 2 == 512 </p>
<p>a == 8</p>
<h2 id="太空船操作符（组合比较符）"><a href="#太空船操作符（组合比较符）" class="headerlink" title="太空船操作符（组合比较符）"></a>太空船操作符（组合比较符）</h2><p>太空船操作符用于比较两个表达式。当 b 时它分别返回 -1 、 0 或 1 。 比较的原则是沿用 PHP 的常规比较规则进行的。</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Integers</span></span><br><span class="line"><span class="keyword">echo</span> <span class="number">1</span> &lt;=&gt; <span class="number">1</span>; <span class="comment">// 0</span></span><br><span class="line"><span class="keyword">echo</span> <span class="number">1</span> &lt;=&gt; <span class="number">2</span>; <span class="comment">// -1</span></span><br><span class="line"><span class="keyword">echo</span> <span class="number">2</span> &lt;=&gt; <span class="number">1</span>; <span class="comment">// 1</span></span><br><span class="line"><span class="comment">// Floats</span></span><br><span class="line"><span class="keyword">echo</span> <span class="number">1.5</span> &lt;=&gt; <span class="number">1.5</span>; <span class="comment">// 0</span></span><br><span class="line"><span class="keyword">echo</span> <span class="number">1.5</span> &lt;=&gt; <span class="number">2.5</span>; <span class="comment">// -1</span></span><br><span class="line"><span class="keyword">echo</span> <span class="number">2.5</span> &lt;=&gt; <span class="number">1.5</span>; <span class="comment">// 1</span></span><br><span class="line"><span class="comment">// Strings</span></span><br><span class="line"><span class="keyword">echo</span> <span class="string">"a"</span> &lt;=&gt; <span class="string">"a"</span>; <span class="comment">// 0</span></span><br><span class="line"><span class="keyword">echo</span> <span class="string">"a"</span> &lt;=&gt; <span class="string">"b"</span>; <span class="comment">// -1</span></span><br><span class="line"><span class="keyword">echo</span> <span class="string">"b"</span> &lt;=&gt; <span class="string">"a"</span>; <span class="comment">// 1</span></span><br></pre></td></tr></table></figure>
<h2 id="Traits"><a href="#Traits" class="headerlink" title="Traits"></a>Traits</h2><p>Traits提供了一种灵活的代码重用机制，即不像interface一样只能定义方法但不能实现，又不能像class一样只能单继承。至于在实践中怎样使用，还需要深入思考。<br>魔术常量为TRAIT</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line">官网的一个例子：  </span><br><span class="line"><span class="keyword">trait</span> SayWorld &#123;  </span><br><span class="line">        <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">sayHello</span><span class="params">()</span> </span>&#123;  </span><br><span class="line">                <span class="keyword">parent</span>::sayHello();  </span><br><span class="line">                <span class="keyword">echo</span> <span class="string">"World!\n"</span>;  </span><br><span class="line">                <span class="keyword">echo</span> <span class="string">'ID:'</span> . <span class="keyword">$this</span>-&gt;id . <span class="string">"\n"</span>;  </span><br><span class="line">        &#125;  </span><br><span class="line">&#125;  </span><br><span class="line"> </span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Base</span> </span>&#123;  </span><br><span class="line">        <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">sayHello</span><span class="params">()</span> </span>&#123;  </span><br><span class="line">                <span class="keyword">echo</span> <span class="string">'Hello '</span>;  </span><br><span class="line">        &#125;  </span><br><span class="line">&#125;  </span><br><span class="line"> </span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyHelloWorld</span> <span class="keyword">extends</span> <span class="title">Base</span> </span>&#123;  </span><br><span class="line">        <span class="keyword">private</span> $id;  </span><br><span class="line"> </span><br><span class="line">        <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">__construct</span><span class="params">()</span> </span>&#123;  </span><br><span class="line">                <span class="keyword">$this</span>-&gt;id = <span class="number">123456</span>;  </span><br><span class="line">        &#125;  </span><br><span class="line"> </span><br><span class="line">        <span class="keyword">use</span> <span class="title">SayWorld</span>;  </span><br><span class="line">&#125;  </span><br><span class="line"> </span><br><span class="line">$o = <span class="keyword">new</span> MyHelloWorld();  </span><br><span class="line">$o-&gt;sayHello();  </span><br><span class="line"> </span><br><span class="line"><span class="comment">/*will output: </span></span><br><span class="line"><span class="comment">Hello World! </span></span><br><span class="line"><span class="comment">ID:123456 </span></span><br><span class="line"><span class="comment"> */</span></span><br></pre></td></tr></table></figure>
<h2 id="array-数组简写语法"><a href="#array-数组简写语法" class="headerlink" title="array 数组简写语法"></a>array 数组简写语法</h2><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">$arr = [<span class="number">1</span>,<span class="string">'james'</span>, <span class="string">'james@fwso.cn'</span>];  </span><br><span class="line">$array = [  </span><br><span class="line">　　<span class="string">"foo"</span> =&gt; <span class="string">"bar"</span>,  </span><br><span class="line">　　<span class="string">"bar"</span> =&gt; <span class="string">"foo"</span>  </span><br><span class="line">　　];</span><br></pre></td></tr></table></figure>
<h2 id="array-数组中某个索引值简写"><a href="#array-数组中某个索引值简写" class="headerlink" title="array 数组中某个索引值简写"></a>array 数组中某个索引值简写</h2><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">myfunc</span><span class="params">()</span> </span>&#123;  </span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">array</span>(<span class="number">1</span>,<span class="string">'james'</span>, <span class="string">'james@fwso.cn'</span>);  </span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">echo</span> myfunc()[<span class="number">1</span>];  </span><br><span class="line"> </span><br><span class="line">$name = explode(<span class="string">","</span>, <span class="string">"Laruence,male"</span>)[<span class="number">0</span>];  </span><br><span class="line">explode(<span class="string">","</span>, <span class="string">"Laruence,male"</span>)[<span class="number">3</span>] = <span class="string">"phper"</span>;</span><br></pre></td></tr></table></figure>
<h2 id="非变量array和string也能支持下标获取了"><a href="#非变量array和string也能支持下标获取了" class="headerlink" title="非变量array和string也能支持下标获取了"></a>非变量array和string也能支持下标获取了</h2><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">echo array(1, 2, 3)[0];  </span><br><span class="line">echo [<span class="string">1, 2, 3</span>][<span class="symbol">0</span>];  </span><br><span class="line">echo "foobar"[2];</span><br></pre></td></tr></table></figure>
<h2 id="支持为负的字符串偏移量"><a href="#支持为负的字符串偏移量" class="headerlink" title="支持为负的字符串偏移量"></a>支持为负的字符串偏移量</h2><p>现在所有接偏移量的内置的基于字符串的函数都支持接受负数作为偏移量，包括数组解引用操作符([]).</p>
<figure class="highlight lisp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">var_dump(<span class="string">"abcdef"</span>[<span class="number">-2</span>])<span class="comment">;</span></span><br><span class="line">var_dump(<span class="name">strpos</span>(<span class="string">"aabbcc"</span>, <span class="string">"b"</span>, <span class="number">-3</span>))<span class="comment">;</span></span><br></pre></td></tr></table></figure>
<p>以上例程会输出</p>
<figure class="highlight lsl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">string</span> (<span class="number">1</span>) <span class="string">"e"</span></span><br><span class="line">int(<span class="number">3</span>)</span><br></pre></td></tr></table></figure>
<h2 id="常量引用"><a href="#常量引用" class="headerlink" title="常量引用"></a>常量引用</h2><p>“常量引用”意味着数组可以直接操作字符串和数组字面值。举两个例子:</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">randomHexString</span><span class="params">($length)</span> </span>&#123;    </span><br><span class="line">    $str = <span class="string">''</span>;    </span><br><span class="line">    <span class="keyword">for</span> ($i = <span class="number">0</span>; $i &lt; $length; ++$i) &#123;    </span><br><span class="line">        $str .= <span class="string">"0123456789abcdef"</span>[mt_rand(<span class="number">0</span>, <span class="number">15</span>)]; <span class="comment">// direct dereference of string    </span></span><br><span class="line">    &#125;    </span><br><span class="line">&#125;    </span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">randomBool</span><span class="params">()</span> </span>&#123;    </span><br><span class="line">    <span class="keyword">return</span> [<span class="keyword">false</span>, <span class="keyword">true</span>][mt_rand(<span class="number">0</span>, <span class="number">1</span>)]; <span class="comment">// direct dereference of array    </span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="常量增强"><a href="#常量增强" class="headerlink" title="常量增强"></a>常量增强</h2><p>允许常量计算,允许使用包含数字、字符串字面值和常量的标量表达式</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> A = <span class="number">2</span>;  </span><br><span class="line"><span class="keyword">const</span> B = A + <span class="number">1</span>;  </span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">C</span>  </span></span><br><span class="line"><span class="class"></span>&#123;  </span><br><span class="line">    <span class="keyword">const</span> STR = <span class="string">"hello"</span>;  </span><br><span class="line">    <span class="keyword">const</span> STR2 = <span class="keyword">self</span>::STR + <span class="string">", world"</span>;  </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>允许常量作为函数参数默认</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="built_in">test</span>(<span class="variable">$arg</span> = C::STR2)</span><br></pre></td></tr></table></figure>
<p>类常量可见性 </p>
<p>现在起支持设置类常量的可见性。</p>
<figure class="highlight actionscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ConstDemo</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">    <span class="keyword">const</span> PUBLIC_CONST_A = <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">const</span> PUBLIC_CONST_B = <span class="number">2</span>;</span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">const</span> PROTECTED_CONST = <span class="number">3</span>;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">const</span> PRIVATE_CONST = <span class="number">4</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="通过define-定义常量数组"><a href="#通过define-定义常量数组" class="headerlink" title="通过define()定义常量数组"></a>通过define()定义常量数组</h2><figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">define</span>(<span class="string">'ANIMALS'</span>, [<span class="string">'dog'</span>, <span class="string">'cat'</span>, <span class="string">'bird'</span>]);</span><br><span class="line"><span class="selector-tag">echo</span> <span class="selector-tag">ANIMALS</span><span class="selector-attr">[1]</span>; <span class="comment">// outputs "cat"</span></span><br></pre></td></tr></table></figure>
<h2 id="函数变量类型声明"><a href="#函数变量类型声明" class="headerlink" title="函数变量类型声明"></a>函数变量类型声明</h2><p>两种模式 : 强制 ( 默认 ) 和 严格模式</p>
<p>类型：array,object(对象),string、int、float和 bool<br><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">bar</span> </span>&#123;  </span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">foo</span><span class="params">(bar $foo)</span> </span>&#123;  </span><br><span class="line">&#125;  </span><br><span class="line"><span class="comment">//其中函数foo中的参数规定了传入的参数必须为bar类的实例，否则系统会判断出错。同样对于数组来说，也可以进行判断，比如：  </span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">foo</span><span class="params">(array $foo)</span> </span>&#123;  </span><br><span class="line">&#125;  </span><br><span class="line">&#125;  </span><br><span class="line">　　foo(<span class="keyword">array</span>(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>)); <span class="comment">// 正确，因为传入的是数组  </span></span><br><span class="line">　　foo(<span class="number">123</span>); <span class="comment">// 不正确，传入的不是数组</span></span><br><span class="line"> </span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">add</span><span class="params">(int $a)</span> </span></span><br><span class="line"><span class="function"></span>&#123; </span><br><span class="line">    <span class="keyword">return</span> <span class="number">1</span>+$a; </span><br><span class="line">&#125; </span><br><span class="line">var_dump(add(<span class="number">2</span>));</span><br><span class="line"> </span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">foo</span><span class="params">(int $i)</span> </span>&#123; ... &#125;  </span><br><span class="line">foo(<span class="number">1</span>);      <span class="comment">// $i = 1  </span></span><br><span class="line">foo(<span class="number">1.0</span>);    <span class="comment">// $i = 1  </span></span><br><span class="line">foo(<span class="string">"1"</span>);    <span class="comment">// $i = 1  </span></span><br><span class="line">foo(<span class="string">"1abc"</span>); <span class="comment">// not yet clear, maybe $i = 1 with notice  </span></span><br><span class="line">foo(<span class="number">1.5</span>);    <span class="comment">// not yet clear, maybe $i = 1 with notice  </span></span><br><span class="line">foo([]);     <span class="comment">// error  </span></span><br><span class="line">foo(<span class="string">"abc"</span>);  <span class="comment">// error</span></span><br></pre></td></tr></table></figure></p>
<h2 id="可变函数参数"><a href="#可变函数参数" class="headerlink" title="可变函数参数"></a>可变函数参数</h2><p>代替 func_get_args()</p>
<figure class="highlight actionscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">add</span><span class="params">(<span class="rest_arg">...$args</span>)</span>  </span></span><br><span class="line"><span class="function"></span>&#123;  </span><br><span class="line">    $result = <span class="number">0</span>;  </span><br><span class="line">    foreach($args <span class="keyword">as</span> $arg)  </span><br><span class="line">        $result += $arg;  </span><br><span class="line">    <span class="keyword">return</span> $result;  </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="可为空（Nullable）类型"><a href="#可为空（Nullable）类型" class="headerlink" title="可为空（Nullable）类型"></a>可为空（Nullable）类型</h2><p>类型现在允许为空，当启用这个特性时，传入的参数或者函数返回的结果要么是给定的类型，要么是 null 。可以通过在类型前面加上一个问号来使之成为可为空的。</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">test</span><span class="params">(?string $name)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    var_dump($name);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>以上例程会输出：</p>
<figure class="highlight vbscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">string</span>(<span class="number">5</span>) <span class="string">"tpunt"</span></span><br><span class="line"><span class="literal">NULL</span></span><br><span class="line">Uncaught <span class="keyword">Error</span>: Too few arguments <span class="keyword">to</span> <span class="keyword">function</span> test(), <span class="number">0</span> passed <span class="keyword">in</span>...</span><br></pre></td></tr></table></figure>
<h2 id="Void-函数"><a href="#Void-函数" class="headerlink" title="Void 函数"></a>Void 函数</h2><p>在PHP 7 中引入的其他返回值类型的基础上，一个新的返回值类型void被引入。 返回值声明为 void 类型的方法要么干脆省去 return 语句，要么使用一个空的 return 语句。 对于 void 函数来说，null 不是一个合法的返回值。</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">swap</span><span class="params">(&amp;$left, &amp;$right)</span> : <span class="title">void</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">if</span> ($left === $right) &#123;</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    $tmp = $left;</span><br><span class="line">    $left = $right;</span><br><span class="line">    $right = $tmp;</span><br><span class="line">&#125;</span><br><span class="line">$a = <span class="number">1</span>;</span><br><span class="line">$b = <span class="number">2</span>;</span><br><span class="line">var_dump(swap($a, $b), $a, $b);</span><br></pre></td></tr></table></figure>
<p>以上例程会输出：</p>
<p>null</p>
<p>int(2)</p>
<p>int(1)</p>
<p>试图去获取一个 void 方法的返回值会得到 null ，并且不会产生任何警告。这么做的原因是不想影响更高层次的方法。</p>
<h2 id="实例化类"><a href="#实例化类" class="headerlink" title="实例化类"></a>实例化类</h2><figure class="highlight livescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">test</span>&#123;  </span></span><br><span class="line">    <span class="keyword">function</span> show()&#123;  </span><br><span class="line"><span class="keyword">return</span> <span class="string">'test'</span>;  </span><br><span class="line">    &#125;  </span><br><span class="line">&#125;  </span><br><span class="line">echo <span class="function"><span class="params">(<span class="keyword">new</span> test())</span>-&gt;</span>show();</span><br></pre></td></tr></table></figure>
<h2 id="支持-Class-expr-语法"><a href="#支持-Class-expr-语法" class="headerlink" title="支持 Class::{expr}() 语法"></a>支持 Class::{expr}() 语法</h2><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">foreach</span> ([<span class="keyword">new</span> Human(<span class="string">"Gonzalo"</span>), <span class="keyword">new</span> Human(<span class="string">"Peter"</span>)] <span class="keyword">as</span> $human) &#123;  </span><br><span class="line">    <span class="keyword">echo</span> $human-&gt;&#123;<span class="string">'hello'</span>&#125;();  </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="Getter-和-Setter"><a href="#Getter-和-Setter" class="headerlink" title="Getter 和 Setter"></a>Getter 和 Setter</h2><p>如果你从不喜欢写这些getXYZ()和setXYZ($value)方法，那么这应该是你最受欢迎的改变。提议添加一个新的语法来定义一个属性的设置/读取:</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">TimePeriod</span> </span>&#123;  </span><br><span class="line">    <span class="keyword">public</span> $seconds;  </span><br><span class="line">    <span class="keyword">public</span> $hours &#123;  </span><br><span class="line">        get &#123; <span class="keyword">return</span> <span class="keyword">$this</span>-&gt;seconds / <span class="number">3600</span>; &#125;  </span><br><span class="line">        set &#123; <span class="keyword">$this</span>-&gt;seconds = $value * <span class="number">3600</span>; &#125;  </span><br><span class="line">    &#125;  </span><br><span class="line">&#125;  </span><br><span class="line">$timePeriod = <span class="keyword">new</span> TimePeriod;  </span><br><span class="line">$timePeriod-&gt;hours = <span class="number">10</span>;  </span><br><span class="line">var_dump($timePeriod-&gt;seconds); <span class="comment">// int(36000)  </span></span><br><span class="line">var_dump($timePeriod-&gt;hours);   <span class="comment">// int(10)</span></span><br></pre></td></tr></table></figure>
</div><div class="tags"><a href="/tags/PHP/">PHP</a></div><div class="post-nav"><a class="pre" href="/2018/02/03/PHP7新特性（下）/">PHP7新特性（下）</a><a class="next" href="/2018/01/01/MySQL数据库设计规范/">MySQL数据库设计规范</a></div></div></div></div><div class="pure-u-1-4 hidden_mid_and_down"><div id="sidebar"><div class="widget"><form class="search-form" action="//www.google.com/search" method="get" accept-charset="utf-8" target="_blank"><input type="text" name="q" maxlength="20" placeholder="Search"/><input type="hidden" name="sitesearch" value="http://yuehuaxw.com"/></form></div><div class="widget"><div class="widget-title"><i class="fa fa-star-o"> 标签</i></div><div class="tagcloud"><a href="/tags/MySQL/" style="font-size: 15px;">MySQL</a> <a href="/tags/Docker/" style="font-size: 15px;">Docker</a> <a href="/tags/Git/" style="font-size: 15px;">Git</a> <a href="/tags/Hexo/" style="font-size: 15px;">Hexo</a> <a href="/tags/Linux/" style="font-size: 15px;">Linux</a> <a href="/tags/PHP/" style="font-size: 15px;">PHP</a> <a href="/tags/设计模式/" style="font-size: 15px;">设计模式</a> <a href="/tags/Nginx/" style="font-size: 15px;">Nginx</a> <a href="/tags/Redis/" style="font-size: 15px;">Redis</a> <a href="/tags/PHP框架/" style="font-size: 15px;">PHP框架</a> <a href="/tags/高并发/" style="font-size: 15px;">高并发</a></div></div><div class="widget"><div class="widget-title"><i class="fa fa-external-link"> 友情链接</i></div><ul></ul><a href="https://chensenlin.cn/" title="你好我是森林!" target="_blank">你好我是森林!</a><ul></ul><a href="https://www.eckes.site/" title="左手bug，右手情歌" target="_blank">左手bug，右手情歌</a></div></div></div><div class="pure-u-1 pure-u-md-3-4"><div id="footer">Copyright © 2020 <a href="/." rel="nofollow">Hello  广华</a></div></div></div><a class="show" id="rocket" href="#top"></a><script type="text/javascript" src="/js/totop.js?v=0.0.0" async></script><script type="text/javascript" src="//cdn.bootcss.com/fancybox/3.3.5/jquery.fancybox.min.js" async></script><script type="text/javascript" src="/js/fancybox.js?v=0.0.0" async></script><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/fancybox/3.3.5/jquery.fancybox.min.css"><script type="text/javascript" src="/js/codeblock-resizer.js?v=0.0.0"></script><script type="text/javascript" src="/js/smartresize.js?v=0.0.0"></script></div></body></html>